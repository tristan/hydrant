{% extends "kepler/base_site.html" %}
{% load i18n %}
{% block object-tools %}
    {% if user.is_staff %}
    <ul style="float: right;">
        <li style="width: 13em;">
            <a href="{% url upload_workflow %}" class="addlink">Upload Workflow</a>
        </li>
    </ul>
    {% endif %}
{% endblock %}
{% block content %}
<h1>{{ title|escape }}</h1>
<div class="module" id="changelist">
    <div id="toolbar"><form id="changelist-search" action="" method="get">
   
        <label for="searchbar"><img src="{{ MEDIA_URL }}img/kepler/icon_searchbox.png" alt="Search"/></label>
        <input type="text" size="40" name="{{ search_var }}" value="{{ query|escape }}" id="searchbar" />
        <input type="submit" value="Search"/>
        {% if show_result_count %}<span class="small quiet">{% blocktrans count result_count as counter %}1 result{% plural %}{{ counter }} results{% endblocktrans %} (<a href="?">{{ full_result_count }} total</a>)</span>{% endif %}
    
    </form></div>
    <table cellspacing="0">
        <thead>
            <tr>
                {% for header in result_headers %}
                <th{{ header.class_attrib }}>
                    {% if header.sortable %}<a href="{{ header.url }}">{% endif %}
                    {{ header.text|capfirst }}
                    {% if header.sortable %}</a>{% endif %}
                </th>
                {% endfor %}
            </tr>
        </thead>
        <tbody>
            {% for result in results %}
            <tr class="{% cycle 'row1' 'row2' %}">
                {% for item in result %}
                <td>
                {% if item.url %}<a href="{{ item.url }}">{% endif %}
                {{ item.text|escape }}
                {% if item.url %}</a>{% endif %}
                </td>
                {% endfor %}
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <p class="paginator">
    {% if pagination_required %}
    {% for p in pages %}
    {% if p.url %}
        <a href="{{ p.url }}" {% if p.last_page %}class="end"{% endif %}>{{ p.num }}</a>
    {% else %}
        <span class="this-page">{{ p.num }}</span>
    {% endif %}
    {% endfor %}
    {% endif %}
    {{ full_result_count }} {{ title|escape }}
    </p>

</div>
{% endblock %}
